{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'style/menu.css' %}">
{% endblock %}

{% block title %}Menu{% endblock %}

{% block content %}
    <!-- Menu Section -->
    <section class="menu-page">
        <h2>Our Menu</h2>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="message {{ message.tags }}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <!-- Hot Drinks -->
        <div class="menu-section">
            <h3>Hot Drinks</h3>
            {% for item in hot_drinks %}
            <div class="menu-item">
                <img src="{{ item.image_url.url }}" alt="{{ item.name }}">
                <h3>{{ item.name }}</h3>
                <p>{{ item.description }}</p>
                <p><b>Price: ${{ item.price }}</b></p>
                <form method="POST" action="{% url 'place_order' %}">
                    {% csrf_token %}
                    <input type="hidden" name="item_name" value="{{ item.name }}">
                    <input type="hidden" name="price" value="{{ item.price }}">
                    <div class="quantity">
                        <input type="number" name="quantity" value="1" min="1" id="{{ item.name|lower }}-quantity">
                    </div>
                    {% if user.is_authenticated %}
                        <button type="submit">Add to Cart</button>
                    {% else %}
                        <button type="button" onclick="redirectToLogin()">Add to Cart</button>
                    {% endif %}
                </form>
            </div>
            {% endfor %}
        </div>

        <!-- Cold Drinks -->
        <div class="menu-section">
            <h3>Cold Drinks</h3>
            {% for item in cold_drinks %}
            <div class="menu-item">
                <img src="{{ item.image_url.url }}" alt="{{ item.name }}">
                <h3>{{ item.name }}</h3>
                <p>{{ item.description }}</p>
                <p><b>Price: ${{ item.price }}</b></p>
                <form method="POST" action="{% url 'place_order' %}">
                    {% csrf_token %}
                    <input type="hidden" name="item_name" value="{{ item.name }}">
                    <input type="hidden" name="price" value="{{ item.price }}">
                    <div class="quantity">
                        <input type="number" name="quantity" value="1" min="1" id="{{ item.name|lower }}-quantity">
                    </div>
                    {% if user.is_authenticated %}
                        <button type="submit">Add to Cart</button>
                    {% else %}
                        <button type="button" onclick="redirectToLogin()">Add to Cart</button>
                    {% endif %}
                </form>
            </div>
            {% endfor %}
        </div>

        <!-- Ice Creams -->
        <div class="menu-section">
            <h3>Ice Creams</h3>
            {% for item in ice_creams %}
            <div class="menu-item">
                <img src="{{ item.image_url.url }}" alt="{{ item.name }}">
                <h3>{{ item.name }}</h3>
                <p>{{ item.description }}</p>
                <p><b>Price: ${{ item.price }}</b></p>
                <form method="POST" action="{% url 'place_order' %}">
                    {% csrf_token %}
                    <input type="hidden" name="item_name" value="{{ item.name }}">
                    <input type="hidden" name="price" value="{{ item.price }}">
                    <div class="quantity">
                        <input type="number" name="quantity" value="1" min="1" id="{{ item.name|lower }}-quantity">
                    </div>
                    {% if user.is_authenticated %}
                        <button type="submit">Add to Cart</button>
                    {% else %}
                        <button type="button" onclick="redirectToLogin()">Add to Cart</button>
                    {% endif %}
                </form>
            </div>
            {% endfor %}
        </div>

        <!-- Cakes & Pastries -->
        <div class="menu-section">
            <h3>Cakes & Pastries</h3>
            {% for item in cakes %}
            <div class="menu-item">
                <img src="{{ item.image_url.url }}" alt="{{ item.name }}">
                <h3>{{ item.name }}</h3>
                <p>{{ item.description }}</p>
                <p><b>Price: ${{ item.price }}</b></p>
                <form method="POST" action="{% url 'place_order' %}">
                    {% csrf_token %}
                    <input type="hidden" name="item_name" value="{{ item.name }}">
                    <input type="hidden" name="price" value="{{ item.price }}">
                    <div class="quantity">
                        <input type="number" name="quantity" value="1" min="1" id="{{ item.name|lower }}-quantity">
                    </div>
                    {% if user.is_authenticated %}
                        <button type="submit">Add to Cart</button>
                    {% else %}
                        <button type="button" onclick="redirectToLogin()">Add to Cart</button>
                    {% endif %}
                </form>
            </div>
            {% endfor %}
        </div>

    </section>

    <!-- Reservation Button -->
    <section class="reservation">
        <h2>Reserve a Table</h2>
        {% if user.is_authenticated %}
            <p>Want to reserve a table? <a href="{% url 'reservation' %}"> reservation</a></p>
        {% else %}
            <p>Want to reserve a table? Please <a href="{% url 'login' %}">login</a> first.</p>
        {% endif %}
    </section>

    <footer>
        <p>&copy;Our Coffee. All Rights Reserved.</p>
    </footer>

    <script>
        function redirectToLogin() {
            alert("You need to log in first!");
            window.location.href = "{% url 'login' %}";
        }
    </script>

{% endblock %}





